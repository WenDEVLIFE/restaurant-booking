<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Bite Restaurant Booking</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
       * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
    }

    .container {
      display: flex;
      min-height: 100vh;
      gap: 30px;
      padding: 30px;
      max-width: 1400px;
      margin: 0 auto;
      align-items: flex-start; /* Changed from default stretch */
    }

    /* Left Section - Dishes */
    .left-section {
      flex: 1;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 24px;
      padding: 40px;
      backdrop-filter: blur(20px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      height: auto; /* Allow natural height */
      max-height: none; /* Remove any height restrictions */
      overflow: visible; /* Ensure content is not clipped */
    }

    .left-section h2 {
      font-size: 2.2rem;
      font-weight: 700;
      color: #2d3748;
      margin-bottom: 30px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .dishes {
      display: grid;
      gap: 20px;
      width: 100%; /* Ensure full width usage */
    }

    .dish {
      display: flex;
      align-items: center;
      background: #fff;
      border-radius: 20px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 2px solid transparent;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
      width: 100%; /* Ensure dishes take full width */
      min-height: 120px; /* Set minimum height for consistency */
    }

    .dish::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .dish:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      border-color: #667eea;
    }

    .dish:hover::before {
      opacity: 1;
    }

    .dish.selected {
      border-color: #667eea;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(102, 126, 234, 0.2);
    }

    .dish-image-container {
      position: relative;
      margin-right: 20px;
      flex-shrink: 0; /* Prevent image container from shrinking */
    }

    .dish img {
      width: 85px;
      height: 85px;
      border-radius: 16px;
      object-fit: cover;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }

    .dish:hover img {
      transform: scale(1.05);
    }

    .dish-overlay {
      position: absolute;
      top: 8px;
      right: 8px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      color: #667eea;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .dish:hover .dish-overlay {
      opacity: 1;
    }

    .dish-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-width: 0; /* Allow text to wrap properly */
      word-wrap: break-word; /* Handle long words */
    }

    .dish-name {
      font-size: 1.2rem;
      font-weight: 700;
      color: #2d3748;
      margin: 0;
      line-height: 1.3;
    }

    .dish-price {
      color: #667eea;
      font-weight: 700;
      font-size: 1.3rem;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .dish-price::before {
      content: 'â‚±';
      font-size: 1.1rem;
      opacity: 0.8;
    }

    .dish-rating {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 0.9rem;
      color: #718096;
    }

    .dish-rating .stars {
      color: #ffd700;
      display: flex;
      gap: 2px;
    }

    .dish-description {
      font-size: 0.85rem;
      color: #718096;
      line-height: 1.4;
      margin-top: 5px;
    }

    .dish-badge {
      position: absolute;
      top: 15px;
      left: 15px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      font-size: 0.7rem;
      padding: 4px 8px;
      border-radius: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      z-index: 2; /* Ensure badge is above other elements */
    }

    /* Right Section - Booking */
    .right-section {
      flex: 1.2;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 24px;
      padding: 40px;
      backdrop-filter: blur(20px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      height: auto; /* Allow natural height */
      max-height: none; /* Remove height restrictions */
    }

    .booking-header {
      margin-bottom: 35px;
    }

    .booking-header h2 {
      font-size: 2.2rem;
      font-weight: 700;
      color: #2d3748;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    #peopleCount {
      color: #718096;
      font-size: 1.1rem;
      font-weight: 500;
    }

    /* Time Buttons */
    .times {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 12px;
      margin-bottom: 35px;
    }

    .times button {
      background: #fff;
      border: 2px solid #e2e8f0;
      border-radius: 16px;
      padding: 15px 20px;
      font-size: 0.95rem;
      font-weight: 500;
      color: #4a5568;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: 'Inter', sans-serif;
    }

    .times button:hover {
      border-color: #667eea;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
    }

    .times button.selected {
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-color: #667eea;
      color: #fff;
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    }

    /* Tables */
    .tables {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }

    .table {
      background: #fff;
      border: 2px solid #e2e8f0;
      border-radius: 20px;
      padding: 25px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      text-align: center;
      font-weight: 600;
      color: #2d3748;
      font-size: 1.1rem;
    }

    .table:hover {
      border-color: #667eea;
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .table.selected {
      border-color: #667eea;
      background: linear-gradient(135deg, #667eea10, #764ba210);
    }

    .table.reserved {
      background: linear-gradient(135deg, #fed7d7, #feb2b2) !important;
      border-color: #e53e3e !important;
      color: #c53030 !important;
    }

    .table.reserved:hover {
      background: linear-gradient(135deg, #fbb6ce, #f687b3) !important;
      transform: translateY(-3px);
    }

    .capacity-label {
      position: absolute;
      top: -10px;
      right: 15px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      font-size: 0.8rem;
      padding: 6px 12px;
      border-radius: 20px;
      font-weight: 500;
    }

    .seats {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 15px;
      flex-wrap: wrap;
    }

    .seat {
      width: 28px;
      height: 28px;
      background: #e2e8f0;
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .seat.filled {
      background: linear-gradient(135deg, #ff5e4d, #ffc371);
      box-shadow: 0 4px 15px rgba(255, 94, 77, 0.3);
    }

    /* Modals */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(10px);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal-content, .modal-success, .modal-error, .details-modal {
      background: #fff;
      border-radius: 24px;
      padding: 40px;
      max-width: 500px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .modal h3 {
      font-size: 1.8rem;
      font-weight: 700;
      color: #2d3748;
      margin-bottom: 25px;
      text-align: center;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .form-group {
      margin-bottom: 25px;
    }

    .form-group label {
      display: block;
      font-weight: 600;
      color: #4a5568;
      margin-bottom: 8px;
      font-size: 1rem;
    }

    .form-group input, .form-group select {
      width: 100%;
      padding: 15px 20px;
      border: 2px solid #e2e8f0;
      border-radius: 16px;
      font-size: 1rem;
      font-family: 'Inter', sans-serif;
      transition: all 0.3s ease;
      background: #fff;
    }

    .form-group input:focus, .form-group select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .form-buttons {
      display: flex;
      gap: 15px;
      margin-top: 30px;
    }

    .btn-confirm, .btn-cancel {
      flex: 1;
      padding: 15px 25px;
      border: none;
      border-radius: 16px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: 'Inter', sans-serif;
    }

    .btn-confirm {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
    }

    .btn-confirm:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
    }

    .btn-cancel {
      background: #e2e8f0;
      color: #4a5568;
    }

    .btn-cancel:hover {
      background: #cbd5e0;
      transform: translateY(-2px);
    }

    .modal button {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      border: none;
      padding: 12px 30px;
      border-radius: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 20px;
      width: 100%;
    }

    .modal button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    }

    .error-message {
      color: #e53e3e;
      font-weight: 600;
      margin-top: 15px;
      text-align: center;
    }

    .details-info {
      background: #f7fafc;
      padding: 20px;
      border-radius: 16px;
      border-left: 4px solid #667eea;
      margin-bottom: 20px;
    }

      /* Responsive Design */
    @media (max-width: 1024px) {
      .container {
        flex-direction: column;
        padding: 20px;
        align-items: stretch; /* Full width on mobile */
      }
      
      .left-section, .right-section {
        padding: 30px;
        width: 100%; /* Ensure full width */
      }
      
      .tables {
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      }
    }

    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }
      
      .left-section, .right-section {
        padding: 25px;
      }
      
      .times {
        grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
      }
      
      .tables {
        grid-template-columns: 1fr;
      }
      
      .modal-content, .modal-success, .modal-error, .details-modal {
        padding: 30px;
        margin: 20px;
      }

      .dish {
        padding: 15px;
        min-height: 100px; /* Smaller minimum height on mobile */
      }

      .dish img {
        width: 70px;
        height: 70px;
      }

      .dish-image-container {
        margin-right: 15px; /* Reduce margin on smaller screens */
      }
    }

    @media (max-width: 480px) {
      .dish {
        flex-direction: column;
        text-align: center;
        padding: 20px;
        min-height: auto;
      }

      .dish-image-container {
        margin-right: 0;
        margin-bottom: 15px;
      }

      .dish img {
        width: 80px;
        height: 80px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="modal" id="successModal">
      <div class="modal-success">
        <h3><i class="fas fa-check-circle"></i> Reservation Successful!</h3>
        <p id="successText"></p>
        <button onclick="closeModal('successModal')">Close</button>
      </div>
    </div>

    <div class="modal" id="errorModal">
      <div class="modal-error">
        <h3><i class="fas fa-exclamation-triangle"></i> Error</h3>
        <p id="errorText"></p>
        <button onclick="closeModal('errorModal')">Close</button>
      </div>
    </div>

    <div class="modal" id="detailsModal">
      <div class="modal-content details-modal">
        <h3><i class="fas fa-info-circle"></i> Reservation Details</h3>
        <div id="detailsText" class="details-info"></div>
        <button onclick="closeModal('detailsModal')">Close</button>
      </div>
    </div>

    <div class="left-section">
      <h2><i class="fas fa-utensils"></i> Most Popular Dishes</h2>
      <div class="dishes">
        <div class="dish" onclick="selectDish(this, 'Wok On Walk')">
          <div class="dish-badge">Popular</div>
          <div class="dish-image-container">
            <img src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?auto=format&fit=crop&w=400&q=80"
              alt="Wok On Walk">
            <div class="dish-overlay">
              <i class="fas fa-star"></i>
            </div>
          </div>
          <div class="dish-info">
            <h3 class="dish-name">Wok On Walk</h3>
            <div class="dish-rating">
              <div class="stars">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
              <span>(4.9)</span>
            </div>
            <p class="dish-description">Authentic Asian stir-fry with fresh vegetables and signature sauce</p>
            <div class="dish-price">450</div>
          </div>
        </div>

        <div class="dish" onclick="selectDish(this, 'Grilled Tofu Bowl')">
          <div class="dish-badge">Healthy</div>
          <div class="dish-image-container">
            <img src="https://images.unsplash.com/photo-1589301760014-d929f3979dbc?auto=format&fit=crop&w=400&q=80"
              alt="Grilled Tofu Bowl">
            <div class="dish-overlay">
              <i class="fas fa-leaf"></i>
            </div>
          </div>
          <div class="dish-info">
            <h3 class="dish-name">Grilled Tofu Bowl</h3>
            <div class="dish-rating">
              <div class="stars">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="far fa-star"></i>
              </div>
              <span>(4.6)</span>
            </div>
            <p class="dish-description">Perfectly grilled tofu with quinoa and seasonal vegetables</p>
            <div class="dish-price">200</div>
          </div>
        </div>

        <div class="dish" onclick="selectDish(this, 'Spicy Tuna Bowl')">
          <div class="dish-badge">Spicy</div>
          <div class="dish-image-container">
            <img src="https://images.unsplash.com/photo-1589302168068-964664d93dc0?auto=format&fit=crop&w=400&q=80"
              alt="Spicy Tuna Bowl">
            <div class="dish-overlay">
              <i class="fas fa-fire"></i>
            </div>
          </div>
          <div class="dish-info">
            <h3 class="dish-name">Spicy Tuna Bowl</h3>
            <div class="dish-rating">
              <div class="stars">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
              </div>
              <span>(4.7)</span>
            </div>
            <p class="dish-description">Fresh tuna with spicy mayo, avocado and crispy rice</p>
            <div class="dish-price">350</div>
          </div>
        </div>

        <div class="dish" onclick="selectDish(this, 'Salmon Delight')">
          <div class="dish-badge">Premium</div>
          <div class="dish-image-container">
            <img src="https://images.unsplash.com/photo-1600891964599-f61ba0e24092?auto=format&fit=crop&w=400&q=80"
              alt="Salmon Delight">
            <div class="dish-overlay">
              <i class="fas fa-crown"></i>
            </div>
          </div>
          <div class="dish-info">
            <h3 class="dish-name">Salmon Delight</h3>
            <div class="dish-rating">
              <div class="stars">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
              <span>(4.8)</span>
            </div>
            <p class="dish-description">Premium Atlantic salmon with teriyaki glaze and jasmine rice</p>
            <div class="dish-price">520</div>
          </div>
        </div>
      </div>
    </div>

    <div class="right-section">
      <div class="booking-header">
        <h2><i class="fas fa-calendar-check"></i> Restaurant Booking</h2>
        <span id="peopleCount">Guest capacity: 21</span>
      </div>
      <div class="times" id="timeButtonsContainer"></div>
      <div class="tables">
        <div class="table" data-capacity="5" data-name="The big table" onclick="selectTable(this, 'The big table')">
          <i class="fas fa-users"></i> The Big Table
          <span class="capacity-label">5 seats</span>
          <div class="seats">
            <div class="seat"></div>
            <div class="seat"></div>
            <div class="seat"></div>
            <div class="seat"></div>
            <div class="seat"></div>
          </div>
        </div>
        <div class="table" data-capacity="4" data-name="Table 1" onclick="selectTable(this, 'Table 1')">
          <i class="fas fa-chair"></i> Table 1
          <span class="capacity-label">4 seats</span>
          <div class="seats">
            <div class="seat"></div>
            <div class="seat"></div>
            <div class="seat"></div>
            <div class="seat"></div>
          </div>
        </div>
        <div class="table" data-capacity="4" data-name="Table 2" onclick="selectTable(this, 'Table 2')">
          <i class="fas fa-chair"></i> Table 2
          <span class="capacity-label">4 seats</span>
          <div class="seats">
            <div class="seat"></div>
            <div class="seat"></div>
            <div class="seat"></div>
            <div class="seat"></div>
          </div>
        </div>
        <div class="table" data-capacity="4" data-name="Table 3" onclick="selectTable(this, 'Table 3')">
          <i class="fas fa-chair"></i> Table 3
          <span class="capacity-label">4 seats</span>
          <div class="seats">
            <div class="seat"></div>
            <div class="seat"></div>
            <div class="seat"></div>
            <div class="seat"></div>
          </div>
        </div>
        <div class="table" data-capacity="2" data-name="Table 4" onclick="selectTable(this, 'Table 4')">
          <i class="fas fa-chair"></i> Table 4
          <span class="capacity-label">2 seats</span>
          <div class="seats">
            <div class="seat"></div>
            <div class="seat"></div>
          </div>
        </div>
        <div class="table" data-capacity="2" data-name="Table 5" onclick="selectTable(this, 'Table 5')">
          <i class="fas fa-chair"></i> Table 5
          <span class="capacity-label">2 seats</span>
          <div class="seats">
            <div class="seat"></div>
            <div class="seat"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="formModal">
      <div class="modal-content reservation-modal">
        <h3><i class="fas fa-bookmark"></i> Reserve Your Table</h3>
        <form id="reservationForm" class="reservation-form">
          <div class="form-group">
            <label for="name"><i class="fas fa-user"></i> Your Name</label>
            <input type="text" id="name" name="name" placeholder="Enter your name" required>
          </div>

          <div class="form-group">
            <label for="phone"><i class="fas fa-phone"></i> Phone Number</label>
            <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" required>
          </div>

          <div class="form-group">
            <label for="guestCount"><i class="fas fa-users"></i> Number of Guests</label>
            <input type="number" id="guestCount" name="guestCount" min="1" required>
          </div>

          <div class="form-group">
            <label for="selectedTime"><i class="fas fa-clock"></i> Time</label>
            <input type="text" id="selectedTime" name="selectedTime" readonly>
          </div>

          <div class="form-group">
            <label for="selectedTable"><i class="fas fa-chair"></i> Table</label>
            <input type="text" id="selectedTable" name="selectedTable" readonly>
          </div>

          <div class="form-group">
            <label for="date"><i class="fas fa-calendar"></i> Date</label>
            <input type="date" id="date" name="date" required>
          </div>

          <div class="form-buttons">
            <button type="submit" class="btn-confirm">Confirm Reservation</button>
            <button type="button" class="btn-cancel" onclick="closeModal('formModal')">Cancel</button>
          </div>

          <div id="confirmationMessage"></div>
          <div id="errorMessage" class="error-message"></div>
        </form>
      </div>
    </div>
  </div>

  <script>
    let selectedTable = '';
    let selectedTime = '';
    let selectedTableElement = null;

    function selectDish(element, dishName) {
      // Remove selected class from all dishes
      document.querySelectorAll('.dish').forEach(dish => dish.classList.remove('selected'));
      // Add selected class to clicked dish
      element.classList.add('selected');
    }

    function selectTime(button) {
      document.querySelectorAll('.times button').forEach(btn => btn.classList.remove('selected'));
      button.classList.add('selected');
      selectedTime = button.dataset.time;
      document.getElementById('selectedTime').value = selectedTime;
    }

    function selectTable(el, name) {
      const isReserved = el.classList.contains('reserved');

      if (isReserved && el.dataset.reservation) {
        const data = JSON.parse(el.dataset.reservation);
        const message = `Name: ${data.name}<br>Phone: ${data.phone || 'N/A'}<br>Guests: ${data.guests}<br>Time: ${data.time}<br>Date: ${data.date}`;
        document.getElementById('detailsText').innerHTML = message;
        document.getElementById('detailsModal').style.display = 'flex';
        return;
      }

      document.querySelectorAll('.table').forEach(tbl => tbl.classList.remove('selected'));
      el.classList.add('selected');
      selectedTable = name;
      selectedTableElement = el;
      document.getElementById('selectedTable').value = name;

      // Show reservation form modal only if not reserved
      document.getElementById('formModal').style.display = 'flex';
    }

    function closeModal(id) {
      document.getElementById(id).style.display = 'none';
    }

    document.getElementById('reservationForm').addEventListener('submit', async function (e) {
      e.preventDefault();

      const guestCount = parseInt(document.getElementById('guestCount').value);
      const seats = selectedTableElement ? selectedTableElement.querySelectorAll('.seat') : [];
      const capacity = parseInt(selectedTableElement?.dataset.capacity || '0');
      const errorText = document.getElementById('errorText');
      const successText = document.getElementById('successText');

      if (guestCount > capacity) {
        errorText.textContent = `Error: Guest count (${guestCount}) exceeds table capacity (${capacity}).`;
        closeModal('formModal');
        document.getElementById('errorModal').style.display = 'flex';
        return;
      }

      const name = document.getElementById('name').value;
      const phone = document.getElementById('phone').value;
      const time = document.getElementById('selectedTime').value;
      const table = document.getElementById('selectedTable').value;
      const date = document.getElementById('date').value;

      try {
        const response = await fetch('submit.php', {
          method: 'POST',
          headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
          body: new URLSearchParams({
            name,
            phone,
            guestCount,
            selectedTime: time,
            selectedTable: table,
            date
          })
        });

        const result = await response.text();

        if (response.ok && result.toLowerCase().includes('success')) {
          // Mark table as reserved immediately
          selectedTableElement.classList.add('reserved');
          selectedTableElement.dataset.reservation = JSON.stringify({
            name: name,
            phone: phone,
            guests: guestCount,
            time: time,
            date: date
          });

          // Fill seats
          seats.forEach((seat, index) => {
            seat.classList.toggle('filled', index < guestCount);
          });

          successText.textContent = `Reservation confirmed for ${name} with ${guestCount} guest(s) on ${date} at ${time}, Table: ${table}.`;

          closeModal('formModal');
          document.getElementById('successModal').style.display = 'flex';

          // Clear form after successful submission
          document.getElementById('reservationForm').reset();
          document.getElementById('selectedTime').value = selectedTime;
          document.getElementById('date').value = document.getElementById('date').value;

          // Refresh reservations to ensure consistency
          updateReservations();
        } else {
          errorText.textContent = 'Reservation failed. Please try again.';
          closeModal('formModal');
          document.getElementById('errorModal').style.display = 'flex';
        }
      } catch (err) {
        console.error('Submission error:', err);
        errorText.textContent = 'An error occurred. Please try again.';
        closeModal('formModal');
        document.getElementById('errorModal').style.display = 'flex';
      }
    });

    document.addEventListener('DOMContentLoaded', async () => {
      const dateInput = document.getElementById('date');
      const timeButtonsContainer = document.getElementById('timeButtonsContainer');
      const selectedTimeInput = document.getElementById('selectedTime');
      let timeButtons = [];

      const today = new Date();
      const yyyy = today.getFullYear();
      const mm = String(today.getMonth() + 1).padStart(2, '0');
      const dd = String(today.getDate()).padStart(2, '0');
      const currentDate = `${yyyy}-${mm}-${dd}`;
      dateInput.value = currentDate;

      // Generate time buttons: 8:00 AM to 10:00 PM
      for (let hour = 8; hour <= 22; hour++) {
        const time24 = `${String(hour).padStart(2, '0')}:00`;
        const hour12 = hour % 12 || 12;
        const ampm = hour < 12 ? 'AM' : 'PM';
        const label = `${hour12}:00 ${ampm}`;

        const btn = document.createElement('button');
        btn.textContent = label;
        btn.dataset.time = time24;
        btn.type = 'button';
        btn.onclick = () => {
          selectTime(btn);
          updateReservations();
        };

        timeButtonsContainer.appendChild(btn);
        timeButtons.push(btn);
      }

      // Auto-select first slot
      if (timeButtons.length > 0) {
        timeButtons[0].classList.add('selected');
        selectedTime = timeButtons[0].dataset.time;
        selectedTimeInput.value = selectedTime;
        fetchReservations(currentDate, selectedTime);
      }

      async function fetchReservations(date, time) {
        try {
          const response = await fetch(`fetch_reservations.php?date=${encodeURIComponent(date)}&time=${encodeURIComponent(time)}`);
          const reservations = await response.json();

          // Clear all reservations first
          document.querySelectorAll('.seat').forEach(seat => seat.classList.remove('filled'));
          document.querySelectorAll('.table').forEach(table => {
            table.classList.remove('reserved');
            delete table.dataset.reservation;
          });

          // Apply reservations
          reservations.forEach(res => {
            const selector = `.table[data-name="${res.table_name.replace(/"/g, '&quot;')}"]`;
            const tableElement = document.querySelector(selector);
            if (tableElement) {
              const seats = tableElement.querySelectorAll('.seat');
              const guests = parseInt(res.guests);

              for (let i = 0; i < guests && i < seats.length; i++) {
                seats[i].classList.add('filled');
              }

              tableElement.classList.add('reserved');
              tableElement.dataset.reservation = JSON.stringify({
                name: res.name,
                phone: res.phone || 'N/A',
                guests: res.guests,
                time: res.time,
                date: res.date
              });
            }
          });

        } catch (err) {
          console.error('Error fetching reservations:', err);
        }
      }

      function updateReservations() {
        const date = dateInput.value;
        const timeBtn = timeButtons.find(btn => btn.classList.contains('selected'));
        const time = timeBtn ? timeBtn.dataset.time : null;
        if (date && time) fetchReservations(date, time);
      }

      dateInput.addEventListener('change', updateReservations);
    });
  </script>

</body>

</html>